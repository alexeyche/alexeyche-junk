x<- c("a":"z")
x<- c("a","b","c","d")
x
x[2]
x[1:4]
x[1:3]
x[x>"A"]
x[x>"a"]
x[x>"B"]
x[x>"B"]
u <- x> "a"
u
x > "a"
x[u]
x <- matrix(1:6,2,3)
x
x[1,1]
x[1,
x[1,
]
]
x[1,]
dat <- read.delim("http://figshare.com/media/download/98923/97987")
View(dat)
attach
attach(dat)
cor.test(CAnumber, ZMlength)
cor.test(log(CAnumber+1), log(ZMlength))
shapiro.test(log(CAnumber+1))
cor.test(CAnumber, ZMlength, method = "spearman")
cor.test(CAnumber, ZMlength, method = "kendall")
install.packages("TSA")
library(TSA)
?win
??win
win
win.graph
?win.graph
??win.graph
win.graph(width=4.875, height=2.5,pointsize=8)
graph(width=4.875, height=2.5,pointsize=8)
data(larain)
fix(larain)
dev.new(width=4.875, height=2.5,pointsize=8)
X11(width=4.875, height=2.5,pointsize=8)
plot(y=larain,x=zlag(larain),ylab='Inches',
xlab='Previous Year Inches')
larain
zlag(larain)
plot(y=larain,x=larain,ylab='Inches',
xlab='Previous Year Inches')
plot(y=larain,x=zlag(larain),ylab='Inches',
xlab='Previous Year Inches')
plot(y=larain,ylab='Inches',
xlab='Previous Year Inches')
plot(x=larain,ylab='Inches',
xlab='Previous Year Inches')
larain
data(larain); plot(larain,ylab='Inches',xlab='Year',type='o')
plot(y=color,x=zlag(color),ylab='Color Property',
xlab='Previous Batch Color Property')
plot(y=color,x=zlag(color),ylab='Color Property',
xlab='Previous Batch Color Property')
data(color)
fix(color)
str(color)
color
plot(color,ylab='Color Property',xlab='Batch',type='o')
?zlag
?aggregate
data(AirPassengers)
AP <- AirPassengers
class(AP)
aggregate(x)
aggregate(AP)
plot(aggregate(AP))
fix(AP)
?cycle
cycle(AP)
AP
boxplot(AP ~ cycle(AP))
www <- "http://www.massey.ac.nz/~pscowper/ts/Maine.dat"
Maine.month <- read.table(www, header = TRUE)
View(Maine.month)
hist(Maine.month)
View(Maine.month)
View(Maine.month)
Maine.month
attach(Maine.month)
class(Maine.month)
unemploy
class(unemploy)
hist(unemploy)
ts(unemploy, start = c(1996, 1), freq = 12)
?rnorm
?stats
library(help="stats")
GammaDist
?gamma
gamma(10,10)
source('~/my/git/alexeyche-junk/ml/dbn/sentim.R', echo=TRUE)
setwd("~/my/git/alexeyche-junk/ml/dbn")
source('~/my/git/alexeyche-junk/ml/dbn/sentim.R', echo=TRUE)
plot_tsne <- function(data,target) {
colors = rainbow(length(unique(target)))
names(colors) =  unique(as.character(target))
ecb = function(x,y) {
plot(x,t='n')
text(x,labels=target.w, col=colors[target.w])
Sys.sleep(0.1) # for RStudio
}
tsne_dbn = tsne(data, epoch_callback = ecb, perplexity=50)
return(tsne_dbn)
}
unbatch_data <- function(batched.data, maxbatches = 3) {
whole <- NULL
c(num.cases, num.dims, num.batches) := dim(batched.data)
for(batch in 1:maxbatches) {
whole <- rbind(whole, matrix(batched.data[,,batch], nrow=num.cases, ncol=num.dims))
}
return(whole)
}
top_hids <- unbatch_data(batch.pos.hid.probs_2,1)
top_hids.t <- unbatch_data(data.b.t,1)
tsne_dbn <- plot_tsne(top_hids, top_hids.t)
plot_tsne <- function(data,target) {
colors = rainbow(length(unique(target)))
names(colors) =  unique(as.character(target))
ecb = function(x,y) {
plot(x,t='n')
text(x,labels=target, col=colors[target])
Sys.sleep(0.1) # for RStudio
}
tsne_dbn = tsne(data, epoch_callback = ecb, perplexity=50)
return(tsne_dbn)
}
unbatch_data <- function(batched.data, maxbatches = 3) {
whole <- NULL
c(num.cases, num.dims, num.batches) := dim(batched.data)
for(batch in 1:maxbatches) {
whole <- rbind(whole, matrix(batched.data[,,batch], nrow=num.cases, ncol=num.dims))
}
return(whole)
}
top_hids <- unbatch_data(batch.pos.hid.probs_2,1)
top_hids.t <- unbatch_data(data.b.t,1)
tsne_dbn <- plot_tsne(top_hids, top_hids.t)
top_hids <- unbatch_data(batch.pos.hid.probs_2,10)
top_hids.t <- unbatch_data(data.b.t,10)
tsne_dbn <- plot_tsne(top_hids, top_hids.t)
top_hids <- unbatch_data(batch.pos.hid.probs_3,10)
top_hids.t <- unbatch_data(data.b.t,10)
tsne_dbn <- plot_tsne(top_hids, top_hids.t)
batched.data <- data.b
params <- train.params
c(num.cases, num.vis, num.batches) := dim(batched.data)
for (v in 1:length(params)) assign(names(params)[v], params[[v]])
if(is.null(model)) {  # need to create new model
model <- list(W = array(0.01*rnorm(num.vis*num.hid),dim=c(num.vis,num.hid)), # visible units for row, hidden units for col
vis_bias = array(0,dim = c(1,num.vis)),
hid_bias = array(0,dim = c(1,num.hid)),
num.cases = num.cases)
epoch <- 1
batch.pos.hid.probs <- array(0, dim = c(num.cases, num.hid, num.batches))
} else {
if(is.null(num.hid)) {
cat("Need specified hidden units, or model\n")
}
}
#png(filename=sprintf("0_epoch_%d",epoch,num.vis))
#hist(model$W)
#dev.off()
W.inc <- hid_bias.inc <- vis_bias.inc <- 0
model <- NULL
c(num.cases, num.vis, num.batches) := dim(batched.data)
for (v in 1:length(params)) assign(names(params)[v], params[[v]])
if(is.null(model)) {  # need to create new model
model <- list(W = array(0.01*rnorm(num.vis*num.hid),dim=c(num.vis,num.hid)), # visible units for row, hidden units for col
vis_bias = array(0,dim = c(1,num.vis)),
hid_bias = array(0,dim = c(1,num.hid)),
num.cases = num.cases)
epoch <- 1
batch.pos.hid.probs <- array(0, dim = c(num.cases, num.hid, num.batches))
} else {
if(is.null(num.hid)) {
cat("Need specified hidden units, or model\n")
}
}
#png(filename=sprintf("0_epoch_%d",epoch,num.vis))
#hist(model$W)
#dev.off()
W.inc <- hid_bias.inc <- vis_bias.inc <- 0
batch <- 1
data <- batched.data[,,batch]
data
str(data)
i <- sample(1:ncol(v))
v <- data
i <- sample(1:ncol(v))
i
i <- sample(1:ncol(v),1)
i
v[,i]
1 -v[,i]
1 -v[,i+1]
v[,i+1]
1 - v[,i+1]
v_inv <- v
v_inv[,i]
v_inv[,i] <- 1 - v_inv[,i]
v_inv[,i]
(free_energy(v_inv,model) - free_energy(v,model)
free_energy(v_inv,model) - free_energy(v,model)
sigmoid(free_energy(v_inv,model) - free_energy(v,model))
log(sigmoid(free_energy(v_inv,model) - free_energy(v,model)))
v * log(sigmoid(free_energy(v_inv,model) - free_energy(v,model)))
v
str(v)
str(log(sigmoid(free_energy(v_inv,model) - free_energy(v,model))))
num.vis*log(sigmoid((free_energy(v_inv,model) - free_energy(v,model))))
mean(num.vis*log(sigmoid((free_energy(v_inv,model) - free_energy(v,model)))))
source('~/my/dbn/hinton_code/Autoencoder_Code/rbm_toy.R', echo=TRUE)
source('~/my/dbn/hinton_code/Autoencoder_Code/rbm_toy.R', echo=TRUE)
source('~/my/git/alexeyche-junk/ml/dbn/sentim.R', echo=TRUE)
top_hids <- unbatch_data(batch.pos.hid.probs_3,20)
top_hids.t <- unbatch_data(data.b.t,20)
tsne_dbn <- plot_tsne(top_hids, top_hids.t)
