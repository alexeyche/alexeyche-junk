#         for(i in 1:x) {
#             data[i,i] <- 1
#             data[i,(i+2)] <- 1
#             data[i,(i+4)] <- 1
#         }
#         data_all <- rbind(data_all, data)
#     }
return(data_all)
}
gen_data(1200, model)
write.table(gen_data(1200, model), '/home/alexeyche/prog/alexeyche-junk/ml/dbn/th/ts_toy.csv', row.names=FALSE, col.names=FALSE)
write.table(gen_data(1200, model), '/home/alexeyche/prog/alexeyche-junk/ml/dbn/th/ts_toy.csv', row.names=FALSE, col.names=FALSE, sep=",")
data
data[,,1]
data[,,1].shape
dim(data[,,1])
data[,,1]
data[,,1] %*% model$W_uv[,,1]
?rredis
require(rredis)
?rredis
??rredis
redisGet("*:W*")
redisConnect()
redisGet("*:W*")
redisGet("*")
redisKeys("*")
redisKeys("0:W_inc*")
redisGet(redisKeys("0:W_inc:*"))
redisKeys()
redisMGet(redisKeys("0:W_inc:*"))
redisKeys("0:W_inc:*")
sort(redisKeys("0:W_inc:*"))
strsplit(redisKeys("0:W_inc:*"), ":"
)
W_inc = strsplit(redisKeys("*:W_inc:*"), ":" )
W_inc
for (k in redisKeys("*:W_inc:*")) {
v = strsplit(k)
}
for (k in redisKeys("*:W_inc:*")) {
v = strsplit(k)
}
for (k in redisKeys("*:W_inc:*")) {
v = strsplit(k,":")
}
v
v[0]
v[[0]]
v[[1]]
v[1]
v[[1]]
source('sys.R')
setwd("~/prog/alexeyche-junk/ml/dbn")
c(it, key, line) = strsplit(k,":")[[0]]
c(it, key, line) := strsplit(k,":")[[0]]
source('sys.R')
c(it, key, line) := strsplit(k,":")[[0]]
c(it, key, line) := strsplit(k,":")[[1]]
it
as.integer(it)
l <- list()
for (k in redisKeys("*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- cbind(l[[key]], line)
}
l <- list()
for (k in redisKeys("0:*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- cbind(l[[key]], line)
}
x <- rnorm(5)
x
redisSet("Rnorm", x)
redisConnect()
l <- list()
for (k in redisKeys("0:*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- cbind(l[[key]], line)
}
fix(l)
line
l
l$W_inc
as.matrix(l$W_inc)
l$W_inc[1:100]
sort(l$W_inc)
"W_inc" in list
l <- list()
for (k in redisKeys("0:*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- rbind(l[[key]], strsplit(redisGet(k)))
}
l <- list()
for (k in redisKeys("0:*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- rbind(l[[key]], strsplit(redisGet(k)," "))
}
redisConnect()
l <- list()
for (k in redisKeys("0:*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- rbind(l[[key]], strsplit(redisGet(k)," "))
}
k
redisGet(k)
redisSet("rrr", rnorm(100))
redisSet("rrr", rnorm(5))
strsplit(redisGet(k)," ")
as.float(strsplit(redisGet(k)," "))
as.single(strsplit(redisGet(k)," "))
as.numeric(strsplit(redisGet(k)," "))
as.numeric(strsplit(redisGet(k)," ")[[1]])
redisConnect()
l <- list()
for (k in redisKeys("0:*")) {
c(it, key, line) := strsplit(k,":")[[1]]
it <- as.integer(it)
line <- as.integer(line)
l[[key]] <- rbind(l[[key]], as.numeric(strsplit(redisGet(k)," ")[[1]]))
}
getVal("0:W_inc:0")
getVal <- function(key) {
as.numeric(strsplit(redisGet(k)," ")[[1]])
}
getVal("0:W_inc:0")
strsplit(redisGet("0:W_inc:0")," ")[[1]]
as.numeric(strsplit(redisGet("0:W_inc:0")," ")[[1]])
1 in c(1,2,3)
1 %in% c(1,2,3)
key
l
"W_inc" %in% l
str(l)
"W_inc" %in% names(l)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
redisKeys("0:*")
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
l
keys <- redisKeys("0:*")
keys_spl <- strsplit(keys":")
keys_spl <- strsplit(keys,":")
keys_spl
keys
redisMGet(keys)
vals <- redisMGet(keys)
names(vals)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
list
l
parse_val <- function(val) {
as.numeric(strsplit(val, " "))
}
parse_val(vals)
vals
parse_val(vals[[1]])
vals[[1]]
as.numeric(strsplit(vals[[1]], " "))
vals[[1]]
str(vals[[1]])
as.numeric(strsplit(vals[[1]], " "))
strsplit(vals[[1]], " ")
strsplit(vals, " ")
val
vals
vals[[1]]
cbind(vals[[1]], vals[[2]])
strsplit(cbind(vals[[1]], vals[[2]]), " ")
as.numeric(strsplit(cbind(vals[[1]], vals[[2]]), " "))
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
fix(l)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
vals()
vals
l
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
l
l$W_inc
source('dbn_util.R')
gray_plot(W_inc)
gray_plot(l$W_inc)
str(l$W_inc)
melt(l$W_inc)
str(melt(l$W_inc))
source('~/prog/alexeyche-junk/ml/dbn/dbn_util.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
l
l$W_inc
str(l$W_inc)
grey_plot(l$W_inc)
gray_plot(l$W_inc)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
str(l$W_inc)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
l[[key]]
l
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
its <- list(list())
its
its[[1]][[1]] < 2
its[[1]] < 2
its
its[[1]][[1]] <- c(2)
its
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
it
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
l
names(l)
redisConnect()
l <- list(list())
keys <- redisKeys("*")
vals <- redisMGet(keys)
for (k in names(vals)) {
c(it, key, line) := strsplit(k,":")[[1]]
line <- as.integer(line)
l[[it]][[key]] <- rbind(l[[key]], parse_val(vals[[k]]))
}
names(l)
l[[""]]
l[["0"]]
names(l[["0"]])
l[["0"]]$W_inc
gray_plot(l[["0"]]$W_inc)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
warnings()
names(l)
l$"0"
l$"0"$W_inc
grau_plot(l$"0"$W_inc)
gray_plot(l$"0"$W_inc)
source('~/prog/R/many_plots.R', echo=TRUE)
source('~/prog/R/many_plots.R', echo=TRUE)
mtcars
names(l[["1"]]_
names(l[["1"]])
d <- l[["1"]
d <- l[["1"]]
d
d$free_en
ggplot(d$free_en)
ggplot(t(d$free_en))
t(d$free_en)
c(d$free_en)
ggplot(c(d$free_en))
pl_fen <- ggplot(d, aes(free_en))
pl_fen <- ggplot(d, aes(free_en)) + geom_point()
melt(d$free_en)
pl_fen <- ggplot(melt(d$free_en),aes(X1,X2)) + geom_point()
plot(pl_fen)
pl_fen <- ggplot(melt(d$free_en),aes(X1,value)) + geom_point()
plot(pl_fen)
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point()
plot(pl_fen)
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line()
plot(pl_fen)
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() + ylim(0,max(d$free_en))
plot(pl_fen)
max(d$free_en)
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() + ylim(0,min(d$free_en))
plot(pl_fen)
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() + ylim(min(d$free_en),0)
plot(pl_fen)
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() + ylim(min(d$free_en),0) + opts(title = "Free energy")
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
plot(pl_fen)
monit_plots(d)
d
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=lims)+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
print(gg, vplayout(1, 1))
print(pl_fen, vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
print(gg, vplayout(1, 1))
print(pl_fen, vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
x11()
print(gg, vplayout(1, 1))
print(pl_fen, vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
grid.newpage()
x11()
print(gg, vplayout(1, 1))
print(pl_fen, vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
pushViewport(viewport(layout = grid.layout(1, 2)))
x11()
print(gg, vplayout(1, 1))
print(pl_fen, vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
pushViewport(viewport(layout = grid.layout(1, 2)))
grid.newpage()
x11()
print(gg, vplayout(1, 1))
print(pl_fen, vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
pushViewport(viewport(layout = grid.layout(1, 2)))
grid.newpage()
x11()
print(gg, vp = vplayout(1, 1))
print(pl_fen, vp = vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2)))
x11()
print(gg, vp = vplayout(1, 1))
print(pl_fen, vp = vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
print(gg, vp = vplayout(1, 1))
print(pl_fen, vp = vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal()
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
x11()
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
print(gg, vp = vplayout(1, 1))
print(pl_fen, vp = vplayout(1, 2))
}
monit_plots(d)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal() + labs(title = "W_inc")
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
x11()
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
print(gg, vp = vplayout(1, 1))
print(pl_fen, vp = vplayout(1, 2))
}
monit_plots(d)
x11()
?x11
x11(width=1024, height=768)
x11(width=700, height=768)
x11(width=2, height=1)
x11(width=20, height=20)
x11(width=15, height=15)
x11(width=5, height=5)
x11(width=10, height=10)
monit_plots <- function(d) {
gg <- ggplot(melt(d$W_inc),aes(X1,X2))+
geom_tile(aes(fill=value))+
scale_fill_gradient(low="black",high="white",limits=c(min(d$W_inc),max(d$W_inc)))+
coord_equal() + labs(title = "W_inc")
pl_fen <- ggplot(melt(d$free_en),aes(X2,value)) + geom_point() + geom_line() +
ylim(min(d$free_en),0) + labs(title = "Free energy")
x11(width=10, height=10)
grid.newpage()
pushViewport(viewport(layout = grid.layout(2, 2)))
print(gg, vp = vplayout(1, 1))
print(pl_fen, vp = vplayout(1, 2))
}
x11(width=10, height=10)
monit_plots(d)
names(d)
neg_hid_m
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
monit_plots(l[["0"]])
l[["0"]]
names(l[["0"]])
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
d$W_inc
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
?x11
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
names(;)
names(l)
as.integer)names(l))
as.integer(names(l))
sort(as.integer(names(l)))
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
pl_neg_h_m <- get_gray_plot(d$neg_hid_m, "neg hid")
max(as.integer(names(l)))
as.integer(names(l))
as.integer(names(l)
as.integer(names(l))
names(l)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
last_it
l <- refresh_data()
as.integer(names(l)
as.integer(names(l))
l[[""]] <- NULL
names(l)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
last_it
names(l) != ""
as.character(max(as.integer(names(l)[names(l) != ""])))
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
last_it <- as.character(max(as.integer(names(l)[names(l) != ""])))
paste(it, ":*")
it <- 1
paste(it, ":*")
paste(it, ":*", sep="")
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
redisGet("last_it")
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
last_it_new
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
source('~/prog/alexeyche-junk/ml/dbn/rbm_redis.R', echo=TRUE)
